version: 2

models: 
  - name: massachussets_individual_contributions_transform
    description: >
      Transformed individual contribution data from Massachussets campaign finance report
      filtered from ma_itemized_contrib_summary_landing_table where transaction_category is 'Individual'.
    columns:
      - name: source
        description: Source system identifier, 'MA' for massachussets
        tests:
          - accepted_values:
              values: ['MA']

      - name: source_id
        description: Unique ID for the contribution, prefixed with 'MA_'
        tests:
          - not_null
          - unique
          - assert_has_prefix:
              prefix: MA_

      - name: committee_id
        description: Committee ID, prefixed with 'MA_'
        tests:
          - not_null
          - assert_has_prefix:
              prefix: MA_
      
      - name: candidate_id
        description: Candidate ID if applicable, prefixed with 'MA_'
        tests:
          - assert_has_prefix:
              prefix: MA_

      - name: candidate_name
        description: Candidate name for reference (formatted consistently)


      - name: name
        description: Contributor name
        tests:
          - not_null

      - name: city
        description: Contributor city

      - name: state
        description: Contributor state

      - name: zip_code
        description: Contributor ZIP code

      - name: employer
        description: Contributor's employer

      - name: occupation
        description: Contributor's occupation

      - name: amount
        description: Contribution amount (numeric)
        tests:
          - not_null

      - name: contribution_datetime
        description: Timestamp when contribution was submitted
        tests:
          - not_null

      - name: insert_datetime
        description: When this record was inserted into the database
        tests:
          - not_null
  
  - name: massachussets_committee_master_transform
    description: >
      Transformed Massachussets committee data mapped into the unified committee master schema.
      Each row represents a committee with normalized structure and a unique generated ID.
    columns:
      - name: source
        description: Static source identifier, 'MA' for Massachussets
        tests:
          - accepted_values:
              values: ['MA']

      - name: committee_id
        description: Generated unique ID for the committee, prefixed with 'MA_'
        tests:
          - not_null
          - unique
          - assert_has_prefix:
              prefix: MA_

      - name: candidate_id
        description: Candidate ID if the committee is associated with a specific candidate, prefixed with 'MA_'
        tests:
          - assert_has_prefix:
              prefix: MA_

      - name: candidate_name
        description: Candidate name if the committee is associated with a specific candidate

      - name: committee_designation
        description: Committee designation

      - name: name
        description: Committee name
        tests:
          - not_null

      - name: address1
        description: Primary address line

      - name: address2
        description: Secondary address line (currently null)

      - name: city
        description: Committee city

      - name: state
        description: Committee state

      - name: zip_code
        description: Committee ZIP code

      - name: affiliation
        description: Political affiliation/party

      - name: district
        description: District of the election the committee is associated with

      - name: insert_datetime
        description: Timestamp of record insertion in UTC
        tests:
          - not_null

  - name: massachussets_candidate_master_transform
    description: >
      Transformed Massachussets candidate data mapped into the unified candidate master schema.
    columns:
      - name: source
        description: Static source identifier, 'MA' for Massachussets
        tests:
          - accepted_values:
              values: ['MA']

      - name: candidate_id
        description: Prefixed org_id derived candidate identifier
        tests:
          - not_null
          - unique
          - assert_has_prefix:
              prefix: MA_

      - name: name
        description: Candidate name
        tests:
          - not_null

      - name: affiliation
        description: Party affiliation when known

      - name: district
        description: District when known

      - name: insert_datetime
        description: Timestamp of record insertion in UTC
        tests:
          - not_null